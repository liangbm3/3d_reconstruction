## 背景介绍

`img` 文件夹下存放的是一个蜗牛的照片，总共四个角度，每个角度都是从下往上进行等距扫描，不在焦平面会存在弥散。

## 重建思路

首先对图片进行预处理，包括压缩图片大小减少计算量，在z轴方向进行线性插值来扩充z轴方向的数据信息。

对某个角度的图像逐层进行特征提取，识别出哪些区域是清晰的。这里的思路是先转为灰度，然后使用拉普拉斯算子计算二阶导数。如果逐像素计算会发现噪声严重，我通过使用一个小窗口对计算结果进行均值滤波降低噪声。

提取每一层的最清晰部分，即可组成一张多焦点图像。同时根据最清晰部分所在的层数，映射得到深度信息，假设一个内参矩阵，即可将深度信息转换成点云，但是由于真正的内参矩阵不知道，所以投射出来的形状有误差，并不能拟合成一个正在的三维图像。如果知道正确的内参，可以拟合出一个完美的3d图像。

## 最终效果

<!-- 使用HTML表格实现2x2图片布局 -->
<table>
    <tr>
        <td><img src="./gif/gif1.gif" alt="图片1" width="300"></td>
        <td><img src="./gif/gif2.gif" alt="图片2" width="300"></td>
    </tr>
    <tr>
        <td><img src="./gif/gif3.gif" alt="图片3" width="300"></td>
        <td><img src="./gif/gif4.gif" alt="图片4" width="300"></td>
    </tr>
</table>
